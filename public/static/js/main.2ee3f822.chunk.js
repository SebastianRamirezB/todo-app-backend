(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(25),o=n.n(a),r=n(6),s=n(17),i=n(55),u=n(4),l="[note] Add new",d="[note] Note loaded",j="[note] deleted",b="[note] Logout cleaning",p="[auth] Finish checking login state",h="[auth] Login",f="[auth] Logout",O="[ui] Change dark mode",m={checking:!0},v=n(38),x={notes:[]},_={},g="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,k=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{checking:!1});case p:return Object(u.a)(Object(u.a)({},e),{},{checking:!1});case f:return{checking:!1};default:return e}},todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{notes:[].concat(Object(v.a)(e.notes),[t.payload])});case d:return Object(u.a)(Object(u.a)({},e),{},{notes:Object(v.a)(t.payload)});case b:return Object(u.a)(Object(u.a)({},e),{},{notes:[]});case j:return Object(u.a)(Object(u.a)({},e),{},{notes:e.notes.filter((function(e){return e.id!==t.payload}))});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(u.a)(Object(u.a)({},e),{},{darkModeActive:t.payload});default:return e}}}),y=Object(s.e)(k,g(Object(s.a)(i.a))),w=n(10),N=n(16),C=n(7),E=n(9),S=n.n(E),T=n(15),A=n(29),D=n.n(A),I="https://todo-app-se.herokuapp.com",L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(I,"/").concat(e);return"GET"===n?fetch(c):fetch(c,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(I,"/").concat(e),a=localStorage.getItem("token")||"";return"GET"===n?fetch(c,{method:n,headers:{"x-token":a}}):fetch(c,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},F=function(e){return{type:l,payload:e}},M=function(){return function(){var e=Object(T.a)(S.a.mark((function e(t){var n,c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("notes");case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.notes,t(G(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},G=function(e){return{type:d,payload:e}},J=function(e){return{type:j,payload:e}},R=function(){return{type:p}},U=function(e){return{type:h,payload:e}},V=function(){return function(e){localStorage.clear(),e(X()),e({type:b})}},X=function(){return{type:f}},B=n(23),q=n.n(B),z=n(26),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(w.a)(t,2),a=n[0],o=n[1],r=function(){o(e)},s=function(e){var t=e.target;o(Object(u.a)(Object(u.a)({},a),{},Object(z.a)({},t.name,t.value)))};return[a,s,r]},K=n(2),Q=function(){var e=Object(r.b)(),t=Object(c.useState)(""),n=Object(w.a)(t,2),a=n[0],o=n[1],s=H({email:"",password:""}),i=Object(w.a)(s,2),u=i[0],l=i[1],d=u.email,j=u.password,b=function(){return q.a.isEmail(d)?!q.a.isEmpty(j)||(o("Por favor ingresa una contrase\xf1a"),!1):(o("El correo electr\xf3nico no es valido"),!1)};return Object(K.jsx)("div",{className:"todo__auth",children:Object(K.jsxs)("form",{className:"todo__auth-form",onSubmit:function(t){t.preventDefault(),b()&&(o(""),e(function(e,t){return function(){var n=Object(T.a)(S.a.mark((function n(c){var a,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L("auth/login",{email:e,password:t},"POST");case 3:return a=n.sent,n.next=6,a.json();case 6:(o=n.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(U({uid:o.uid,name:o.name}))):D.a.fire("La contrase\xf1a o correo son incorrectos"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),D.a.fire("Estamos teniendo problemas para conectarnos con el servidor");case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(d,j)))},children:[Object(K.jsx)("h2",{children:"Todo App"}),a&&Object(K.jsx)("div",{className:"Todo__message-error",children:a}),Object(K.jsx)("input",{type:"text",placeholder:"Correo Electr\xf3nico",name:"email",autoComplete:"off",value:d,onChange:l}),Object(K.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",name:"password",autoComplete:"off",value:j,onChange:l}),Object(K.jsx)("button",{type:"submit",children:"Iniciar Sesi\xf3n"}),Object(K.jsx)(N.b,{className:"todo__auth-link",to:"/register",children:"\xbfNo tienes una cuenta? Reg\xedstrate"})]})})},W=function(){var e=Object(r.b)(),t=Object(c.useState)(""),n=Object(w.a)(t,2),a=n[0],o=n[1],s=H({name:"",email:"",password:"",passwordConfirmed:""}),i=Object(w.a)(s,2),u=i[0],l=i[1],d=u.name,j=u.email,b=u.password,p=u.passwordConfirmed,h=function(){return 0===d.trim().length?(o("Por favor ingresa un nombre"),!1):q.a.isEmail(j)?!(b!==p||b.length<6)||(o("Verifica si las contrase\xf1as coinciden o tienen 6 o mas de 6 caracteres"),!1):(o("El correo electronico no es valido"),!1)};return Object(K.jsx)("div",{className:"todo__auth",children:Object(K.jsxs)("form",{className:"todo__auth-form",onSubmit:function(t){t.preventDefault(),h()&&(o(""),e(function(e,t,n){return function(){var c=Object(T.a)(S.a.mark((function c(a){var o,r;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,L("auth/register",{name:e,email:t,password:n},"POST");case 2:return o=c.sent,c.next=5,o.json();case 5:(r=c.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(U({uid:r.uid,name:r.name}))):D.a.fire(r.msg);case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(d,j,b)))},children:[Object(K.jsx)("h2",{children:"Reg\xedstrate"}),a&&Object(K.jsx)("div",{className:"Todo__message-error",children:a}),Object(K.jsx)("input",{type:"text",placeholder:"Nombre",name:"name",value:d,onChange:l}),Object(K.jsx)("input",{type:"text",placeholder:"Correo Electr\xf3nico",name:"email",value:j,onChange:l}),Object(K.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",name:"password",value:b,onChange:l}),Object(K.jsx)("input",{type:"password",placeholder:"Confirmar Contrase\xf1a",name:"passwordConfirmed",value:p,onChange:l}),Object(K.jsx)("button",{children:"Registrate"}),Object(K.jsx)(N.b,{className:"todo__auth-link",to:"/login",children:"\xbfTienes una cuenta? Inicia sesi\xf3n"})]})})},Y=n(19),Z=function(e){return{type:O,payload:e}},$=function(){var e=Object(r.c)((function(e){return e.auth})).name,t=Object(r.c)((function(e){return e.ui})).darkModeActive,n=Object(r.b)(),c=function(){n(Z(!t))};return Object(K.jsxs)("nav",{className:"nav",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("h1",{className:"nav__title",children:"TODO"}),Object(K.jsxs)("h5",{className:"nav__name-user",children:[" ",e," "]})]}),Object(K.jsx)("div",{className:"nav__icons",children:Object(K.jsxs)("div",{children:[Object(K.jsx)(Y.b,{onClick:function(){n(V())},className:"nav__icon"}),t?Object(K.jsx)(Y.d,{onClick:c,className:"nav__icons"}):Object(K.jsx)(Y.c,{onClick:c,className:"nav__icons"})]})})]})},ee=n(56),te=function(){var e=Object(r.b)(),t=H({text:""}),n=Object(w.a)(t,3),c=n[0],a=n[1],o=n[2],s=c.text;return Object(K.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),s.length>0&&(e((n=s,function(){var e=Object(T.a)(S.a.mark((function e(t){var c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("notes",{text:n},"POST");case 3:return c=e.sent,e.next=6,c.json();case 6:(a=e.sent).ok&&t(F(a.note)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())),o())},className:"search__form",children:[Object(K.jsx)("label",{htmlFor:"",className:"search__label"}),Object(K.jsx)("input",{name:"text",className:"search__input",type:"text",placeholder:"Crear una nueva tarea...",value:s,onChange:a,autoComplete:"off"}),Object(K.jsx)("button",{className:"search__button",children:Object(K.jsx)(ee.a,{})})]})},ne=function(e){var t=e.valueFilter,n=e.handleCompleted,c=e.handleActive,a=e.handleAll,o=t;return Object(K.jsxs)("div",{className:"todo__filter",children:[Object(K.jsx)("button",{onClick:a,className:"todo__button-filter ".concat("all"===o?"active":""," "),children:"Todos"}),Object(K.jsx)("button",{onClick:c,className:"todo__button-filter ".concat("active"===o?"active":"","  "),children:"Activos"}),Object(K.jsx)("button",{onClick:n,className:"todo__button-filter ".concat("completed"===o?"active":""," "),children:"Completados"})]})},ce=function(e){var t=e.count;return Object(K.jsx)("div",{className:"todo__info",children:Object(K.jsx)("p",{className:"todo__total",children:"".concat(t," items")})})},ae=n(57),oe=function(e){var t=e.text,n=e.id,c=e.completed,a=Object(r.b)();return Object(K.jsxs)("div",{className:"todo__item ".concat(c&&"completed"),children:[Object(K.jsx)("button",{onClick:function(){a(function(e,t){return function(){var n=Object(T.a)(S.a.mark((function n(c){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P("notes/".concat(e),{completed:!t},"PUT");case 3:c(M()),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()}(n,c))},className:"todo__button",children:Object(K.jsx)("div",{className:"todo__gradient",children:Object(K.jsx)(ae.a,{className:"todo__icon-completed"})})}),Object(K.jsxs)("p",{className:"todo__text",children:[" ",t]}),Object(K.jsx)(Y.a,{className:"todo__icon",onClick:function(){a(function(e){return function(){var t=Object(T.a)(S.a.mark((function t(n){var c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P("notes/".concat(e),{},"DELETE");case 3:return c=t.sent,t.next=6,c.json();case 6:t.sent.ok?n(J(e)):alert("Error al eliminar"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(n))}})]})},re=function(){var e=Object(r.c)((function(e){return e.todo})).notes,t=Object(c.useState)("all"),n=Object(w.a)(t,2),a=n[0],o=n[1],s={};if("all"===a)s=e;else if("completed"===a){s=e.filter((function(e){return!1!==e.completed}))}else if("active"===a){s=e.filter((function(e){return!0!==e.completed}))}return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("div",{className:"todo__list",children:s.map((function(e){return Object(K.jsx)(oe,Object(u.a)({},e),e.id)}))}),Object(K.jsx)(ce,{count:s.length}),Object(K.jsx)(ne,{valueFilter:a,handleCompleted:function(){o("completed")},handleActive:function(){o("active")},handleAll:function(){o("all")}})]})},se=function(){var e=Object(r.b)();return Object(c.useEffect)((function(){e(M())}),[e]),Object(K.jsxs)("div",{className:"app",children:[Object(K.jsx)("div",{className:"app__background",children:Object(K.jsx)("div",{className:"app__background-image"})}),Object(K.jsxs)("section",{className:"app__section",children:[Object(K.jsx)($,{}),Object(K.jsx)(te,{}),Object(K.jsx)(re,{})]})]})},ie=n(28),ue=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ie.a)(e,["isAuthenticated","component"]);return Object(K.jsx)(C.b,Object(u.a)(Object(u.a)({},c),{},{component:function(e){return t?Object(K.jsx)(C.a,{to:"/"}):Object(K.jsx)(n,Object(u.a)({},e))}}))},le=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ie.a)(e,["isAuthenticated","component"]);return Object(K.jsx)(C.b,Object(u.a)(Object(u.a)({},c),{},{component:function(e){return t?Object(K.jsx)(n,Object(u.a)({},e)):Object(K.jsx)(C.a,{to:"/login"})}}))},de=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})),n=t.checking,a=t.uid,o=Object(r.c)((function(e){return e.ui})).darkModeActive,s=Object(c.useState)(!1),i=Object(w.a)(s,2),u=i[0],l=i[1],d=o?"isDark":"isLight",j=function(e){l(e.matches)};return Object(c.useEffect)((function(){e(function(){var e=Object(T.a)(S.a.mark((function e(t){var n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(U({uid:c.uid,name:c.name}))):t(R());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(c.useEffect)((function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(j),l(t.matches),e(Z(u)),function(){t.removeListener(j)}}),[u,e]),n?Object(K.jsx)("h5",{children:" Espere... "}):Object(K.jsx)(N.a,{children:Object(K.jsx)("div",{className:"".concat(d),children:Object(K.jsxs)(C.d,{children:[Object(K.jsx)(ue,{exact:!0,path:"/login",component:Q,isAuthenticated:!!a}),Object(K.jsx)(ue,{exact:!0,path:"/register",component:W,isAuthenticated:!!a}),Object(K.jsx)(le,{path:"/",component:se,isAuthenticated:!!a}),Object(K.jsx)(C.a,{to:"/"})]})})})};var je=function(){return Object(K.jsx)(r.a,{store:y,children:Object(K.jsx)(de,{})})};n(151);o.a.render(Object(K.jsx)(je,{}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.2ee3f822.chunk.js.map