(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(25),o=n.n(a),r=n(6),s=n(17),i=n(55),u=n(4),l="[note] Add new",d="[note] Note loaded",j="[note] deleted",b="[note] Logout cleaning",p="[auth] Finish checking login state",O="[auth] Login",h="[auth] Logout",f="[ui] Change dark mode",m={checking:!0},v=n(38),x={notes:[]},_={},g="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,k=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(u.a)(Object(u.a)(Object(u.a)({},e),t.payload),{},{checking:!1});case p:return Object(u.a)(Object(u.a)({},e),{},{checking:!1});case h:return{checking:!1};default:return e}},todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),{},{notes:[].concat(Object(v.a)(e.notes),[t.payload])});case d:return Object(u.a)(Object(u.a)({},e),{},{notes:Object(v.a)(t.payload)});case b:return Object(u.a)(Object(u.a)({},e),{},{notes:[]});case j:return Object(u.a)(Object(u.a)({},e),{},{notes:e.notes.filter((function(e){return e.id!==t.payload}))});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(u.a)(Object(u.a)({},e),{},{darkModeActive:t.payload});default:return e}}}),N=Object(s.e)(k,g(Object(s.a)(i.a))),y=n(10),w=n(16),C=n(7),E=n(9),S=n.n(E),T=n(15),A=n(29),D=n.n(A),I=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(I,"/").concat(e);return"GET"===n?fetch(c):fetch(c,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(I,"/").concat(e),a=localStorage.getItem("token")||"";return"GET"===n?fetch(c,{method:n,headers:{"x-token":a}}):fetch(c,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},R=function(e){return{type:l,payload:e}},F=function(){return function(){var e=Object(T.a)(S.a.mark((function e(t){var n,c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L("notes");case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.notes,t(M(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return{type:d,payload:e}},U=function(e){return{type:j,payload:e}},G=function(){return{type:p}},J=function(e){return{type:O,payload:e}},H=function(){return function(e){localStorage.clear(),e(K()),e({type:b})}},K=function(){return{type:h}},V=n(23),W=n.n(V),B=n(26),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(y.a)(t,2),a=n[0],o=n[1],r=function(){o(e)},s=function(e){var t=e.target;o(Object(u.a)(Object(u.a)({},a),{},Object(B.a)({},t.name,t.value)))};return[a,s,r]},q=n(2),z=function(){var e=Object(r.b)(),t=Object(c.useState)(""),n=Object(y.a)(t,2),a=n[0],o=n[1],s=X({email:"",password:""}),i=Object(y.a)(s,2),u=i[0],l=i[1],d=u.email,j=u.password,b=function(){return W.a.isEmail(d)?!W.a.isEmpty(j)||(o("Por favor ingresa una contrase\xf1a"),!1):(o("El correo electr\xf3nico no es valido"),!1)};return Object(q.jsx)("div",{className:"todo__auth",children:Object(q.jsxs)("form",{className:"todo__auth-form",onSubmit:function(t){t.preventDefault(),b()&&(o(""),e(function(e,t){return function(){var n=Object(T.a)(S.a.mark((function n(c){var a,o;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P("auth/login",{email:e,password:t},"POST");case 3:return a=n.sent,n.next=6,a.json();case 6:(o=n.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(J({uid:o.uid,name:o.name}))):D.a.fire("La contrase\xf1a o correo son incorrectos"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),D.a.fire("Estamos teniendo problemas para conectarnos con el servidor");case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(d,j)))},children:[Object(q.jsx)("h2",{children:"Todo App"}),a&&Object(q.jsx)("div",{className:"Todo__message-error",children:a}),Object(q.jsx)("input",{type:"text",placeholder:"Correo Electr\xf3nico",name:"email",autoComplete:"off",value:d,onChange:l}),Object(q.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",name:"password",autoComplete:"off",value:j,onChange:l}),Object(q.jsx)("button",{type:"submit",children:"Iniciar Sesi\xf3n"}),Object(q.jsx)(w.b,{className:"todo__auth-link",to:"/register",children:"\xbfNo tienes una cuenta? Reg\xedstrate"})]})})},Q=function(){var e=Object(r.b)(),t=Object(c.useState)(""),n=Object(y.a)(t,2),a=n[0],o=n[1],s=X({name:"",email:"",password:"",passwordConfirmed:""}),i=Object(y.a)(s,2),u=i[0],l=i[1],d=u.name,j=u.email,b=u.password,p=u.passwordConfirmed,O=function(){return 0===d.trim().length?(o("Por favor ingresa un nombre"),!1):W.a.isEmail(j)?!(b!==p||b.length<6)||(o("Verifica si las contrase\xf1as coinciden o tienen 6 o mas de 6 caracteres"),!1):(o("El correo electronico no es valido"),!1)};return Object(q.jsx)("div",{className:"todo__auth",children:Object(q.jsxs)("form",{className:"todo__auth-form",onSubmit:function(t){t.preventDefault(),O()&&(o(""),e(function(e,t,n){return function(){var c=Object(T.a)(S.a.mark((function c(a){var o,r;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P("auth/register",{name:e,email:t,password:n},"POST");case 2:return o=c.sent,c.next=5,o.json();case 5:(r=c.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(J({uid:r.uid,name:r.name}))):D.a.fire(r.msg);case 7:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(d,j,b)))},children:[Object(q.jsx)("h2",{children:"Reg\xedstrate"}),a&&Object(q.jsx)("div",{className:"Todo__message-error",children:a}),Object(q.jsx)("input",{type:"text",placeholder:"Nombre",name:"name",value:d,onChange:l}),Object(q.jsx)("input",{type:"text",placeholder:"Correo Electr\xf3nico",name:"email",value:j,onChange:l}),Object(q.jsx)("input",{type:"password",placeholder:"Contrase\xf1a",name:"password",value:b,onChange:l}),Object(q.jsx)("input",{type:"password",placeholder:"Confirmar Contrase\xf1a",name:"passwordConfirmed",value:p,onChange:l}),Object(q.jsx)("button",{children:"Registrate"}),Object(q.jsx)(w.b,{className:"todo__auth-link",to:"/login",children:"\xbfTienes una cuenta? Inicia sesi\xf3n"})]})})},Y=n(19),Z=function(e){return{type:f,payload:e}},$=function(){var e=Object(r.c)((function(e){return e.auth})).name,t=Object(r.c)((function(e){return e.ui})).darkModeActive,n=Object(r.b)(),c=function(){n(Z(!t))};return Object(q.jsxs)("nav",{className:"nav",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{className:"nav__title",children:"TODO"}),Object(q.jsxs)("h5",{className:"nav__name-user",children:[" ",e," "]})]}),Object(q.jsx)("div",{className:"nav__icons",children:Object(q.jsxs)("div",{children:[Object(q.jsx)(Y.b,{onClick:function(){n(H())},className:"nav__icon"}),t?Object(q.jsx)(Y.d,{onClick:c,className:"nav__icons"}):Object(q.jsx)(Y.c,{onClick:c,className:"nav__icons"})]})})]})},ee=n(56),te=function(){var e=Object(r.b)(),t=X({text:""}),n=Object(y.a)(t,3),c=n[0],a=n[1],o=n[2],s=c.text;return Object(q.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault(),s.length>0&&(e((n=s,function(){var e=Object(T.a)(S.a.mark((function e(t){var c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L("notes",{text:n},"POST");case 3:return c=e.sent,e.next=6,c.json();case 6:(a=e.sent).ok&&t(R(a.note)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())),o())},className:"search__form",children:[Object(q.jsx)("label",{htmlFor:"",className:"search__label"}),Object(q.jsx)("input",{name:"text",className:"search__input",type:"text",placeholder:"Crear una nueva tarea...",value:s,onChange:a,autoComplete:"off"}),Object(q.jsx)("button",{className:"search__button",children:Object(q.jsx)(ee.a,{})})]})},ne=function(e){var t=e.valueFilter,n=e.handleCompleted,c=e.handleActive,a=e.handleAll,o=t;return Object(q.jsxs)("div",{className:"todo__filter",children:[Object(q.jsx)("button",{onClick:a,className:"todo__button-filter ".concat("all"===o?"active":""," "),children:"Todos"}),Object(q.jsx)("button",{onClick:c,className:"todo__button-filter ".concat("active"===o?"active":"","  "),children:"Activos"}),Object(q.jsx)("button",{onClick:n,className:"todo__button-filter ".concat("completed"===o?"active":""," "),children:"Completados"})]})},ce=function(e){var t=e.count;return Object(q.jsx)("div",{className:"todo__info",children:Object(q.jsx)("p",{className:"todo__total",children:"".concat(t," items")})})},ae=n(57),oe=function(e){var t=e.text,n=e.id,c=e.completed,a=Object(r.b)();return Object(q.jsxs)("div",{className:"todo__item ".concat(c&&"completed"),children:[Object(q.jsx)("button",{onClick:function(){a(function(e,t){return function(){var n=Object(T.a)(S.a.mark((function n(c){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L("notes/".concat(e),{completed:!t},"PUT");case 3:c(F()),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()}(n,c))},className:"todo__button",children:Object(q.jsx)("div",{className:"todo__gradient",children:Object(q.jsx)(ae.a,{className:"todo__icon-completed"})})}),Object(q.jsxs)("p",{className:"todo__text",children:[" ",t]}),Object(q.jsx)(Y.a,{className:"todo__icon",onClick:function(){a(function(e){return function(){var t=Object(T.a)(S.a.mark((function t(n){var c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L("notes/".concat(e),{},"DELETE");case 3:return c=t.sent,t.next=6,c.json();case 6:t.sent.ok?n(U(e)):alert("Error al eliminar"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(n))}})]})},re=function(){var e=Object(r.c)((function(e){return e.todo})).notes,t=Object(c.useState)("all"),n=Object(y.a)(t,2),a=n[0],o=n[1],s={};if("all"===a)s=e;else if("completed"===a){s=e.filter((function(e){return!1!==e.completed}))}else if("active"===a){s=e.filter((function(e){return!0!==e.completed}))}return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"todo__list",children:s.map((function(e){return Object(q.jsx)(oe,Object(u.a)({},e),e.id)}))}),Object(q.jsx)(ce,{count:s.length}),Object(q.jsx)(ne,{valueFilter:a,handleCompleted:function(){o("completed")},handleActive:function(){o("active")},handleAll:function(){o("all")}})]})},se=function(){var e=Object(r.b)();return Object(c.useEffect)((function(){e(F())}),[e]),Object(q.jsxs)("div",{className:"app",children:[Object(q.jsx)("div",{className:"app__background",children:Object(q.jsx)("div",{className:"app__background-image"})}),Object(q.jsxs)("section",{className:"app__section",children:[Object(q.jsx)($,{}),Object(q.jsx)(te,{}),Object(q.jsx)(re,{})]})]})},ie=n(28),ue=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ie.a)(e,["isAuthenticated","component"]);return Object(q.jsx)(C.b,Object(u.a)(Object(u.a)({},c),{},{component:function(e){return t?Object(q.jsx)(C.a,{to:"/"}):Object(q.jsx)(n,Object(u.a)({},e))}}))},le=function(e){var t=e.isAuthenticated,n=e.component,c=Object(ie.a)(e,["isAuthenticated","component"]);return Object(q.jsx)(C.b,Object(u.a)(Object(u.a)({},c),{},{component:function(e){return t?Object(q.jsx)(n,Object(u.a)({},e)):Object(q.jsx)(C.a,{to:"/login"})}}))},de=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.auth})),n=t.checking,a=t.uid,o=Object(r.c)((function(e){return e.ui})).darkModeActive,s=Object(c.useState)(!1),i=Object(y.a)(s,2),u=i[0],l=i[1],d=o?"isDark":"isLight",j=function(e){l(e.matches)};return Object(c.useEffect)((function(){e(function(){var e=Object(T.a)(S.a.mark((function e(t){var n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(J({uid:c.uid,name:c.name}))):t(G());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(c.useEffect)((function(){var t=window.matchMedia("(prefers-color-scheme: dark)");return t.addListener(j),l(t.matches),e(Z(u)),function(){t.removeListener(j)}}),[u,e]),n?Object(q.jsx)("h5",{children:" Espere... "}):Object(q.jsx)(w.a,{children:Object(q.jsx)("div",{className:"".concat(d),children:Object(q.jsxs)(C.d,{children:[Object(q.jsx)(ue,{exact:!0,path:"/login",component:z,isAuthenticated:!!a}),Object(q.jsx)(ue,{exact:!0,path:"/register",component:Q,isAuthenticated:!!a}),Object(q.jsx)(le,{path:"/",component:se,isAuthenticated:!!a}),Object(q.jsx)(C.a,{to:"/"})]})})})};var je=function(){return Object(q.jsx)(r.a,{store:N,children:Object(q.jsx)(de,{})})};n(151);o.a.render(Object(q.jsx)(je,{}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.24a94469.chunk.js.map